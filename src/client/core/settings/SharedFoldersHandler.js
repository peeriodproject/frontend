/**
 * @jsx React.DOM
 */
'use strict';

var React = require('react');
var Link = require('react-router-component').Link;
//var Async = require('react-async');

var events = require('../events/EventEmitterMixin');

var DropzoneBackroundRenderer = require('../utils/DropzoneBackroundRenderer');
var Folder = require('./Folder');
//var Button = require('../element/Button');
var SvgIcon = require('../element/SvgIcon');

var ChannelMixin = require('../socket/ChannelMixin');
var I18nMixin = require('../i18n/I18nMixin');

var NoSharedFoldersNotice = require('./NoSharedFoldersNotice');

//var DialogHandler = require('../dialog/DialogHandler');
//var AddFolderDialog = require('../dialog/AddFolderDialog');

var SharedFoldersHandler = React.createClass({
	
	_dropzoneBackground: null,
	_dropzoneButton: null,

	mixins: [
		ChannelMixin,
		I18nMixin,
		events.mixinFor('dialogOpen'),
		events.mixinFor('folderAdded')
	],

	channelNames: [
		'folder',
		'folderdropzone'
	],
	
	initialChannelsState: { 
		folders: []
	},

	updateFolderChannelState: function (state) {
		this.setState({
			folders: state
		});
	},

	updateFolderdropzoneChannelState: function (state) {
		var paths = state.sharedFolders || [];

		if (paths.length) {
			for (var i = 0, l = paths.length; i < l; i++) {
				this.folderChannel.send('addFolder', paths[i]);
			}
		}
	},

	handleAddFolderButtonClick: function (event) {
		event.preventDefault();

		this.folderdropzoneChannel.send('open', 'sharedFolders', this._dropzoneBackground, this._dropzoneButton);
	},

	removeFolder: function (path) {
		this.folderChannel.send('removeFolder', path);
	},

	refreshFolder: function (path) {
		// we're checking all folder paths at once.
		this.folderChannel.send('syncFolders');
	},

	showFolder: function (path) {
		this.folderChannel.send('showFolder', path);
	},

	dropzoneRendered: function (data) {
		this._dropzoneBackground = data.background;
		this._dropzoneButton = data.button;
	},

	render: function() {
		var dropzone;
		var noSharedFoldersNotice;
		var hasFoldersClassName = '';
		var folders = {};

		if (!this.state.hasRenderedDropzone) {
			dropzone = (
				<DropzoneBackroundRenderer
					title={this.i18n('dropzone_selectSharedFolder_title')}
					description={this.i18n('dropzone_selectSharedFolder_description')}
					image='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjgwcHgiIGhlaWdodD0iNjBweCIgdmlld0JveD0iMCAwIDgwIDYwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPGcgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGc+CiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDguMDAwMDAwLCA1LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTAsNDcgQzAsNDguNjU3IDEuMzQzLDUwIDMsNTAgTDYxLDUwIEM2Mi42NTcsNTAgNjQsNDguNjU3IDY0LDQ3IEw2NCwxNSBMMCwxNSBMMCw0NyBMMCw0NyBaIE02MSw2IEwyMy45ODIsNiBMMTgsMCBMMywwIEMxLjM0MywwIDAsMS4zNDMgMCwzIEwwLDEyIEw2NCwxMiBMNjQsOSBDNjQsNy4zNDMgNjIuNjU3LDYgNjEsNiBaIE0zNy4yNDM4NzUsMzguNTk5NTQ1NSBMMzcuMjQzODc1LDM4LjU5NjgxODIgQzM3LjIxNjMxMjUsMzguMjk3NzI3MyAzNy4wOTYsMzguMDI2MzYzNiAzNi45MTMxMjUsMzcuODE1NDU0NSBMMzYuOTA5NjI1LDM3LjgxMDkwOTEgQzM2LjkwODc1LDM3LjgxMDkwOTEgMzYuOTA4NzUsMzcuODEgMzYuOTA3ODc1LDM3LjgxIEwzMi45NzQ3NSwzMy4yNjk1NDU1IEwzMi45NzE2ODc1LDMzLjI3MjcyNzMgQzMyLjczMTUsMzIuOTk1NDU0NSAzMi4zODcxODc1LDMyLjgxODE4MTggMzEuOTk5NTYyNSwzMi44MTgxODE4IEMzMS42MTIzNzUsMzIuODE4MTgxOCAzMS4yNjc2MjUsMzIuOTk1OTA5MSAzMS4wMjc0Mzc1LDMzLjI3MjcyNzMgTDMxLjAyMzkzNzUsMzMuMjY5NTQ1NSBMMjcuMDkxNjg3NSwzNy44MDkwOTA5IEMyNy4wOTA4MTI1LDM3LjgxIDI3LjA4OTkzNzUsMzcuODEwOTA5MSAyNy4wODkwNjI1LDM3LjgxMTgxODIgTDI3LjA4NjQzNzUsMzcuODE1IEMyNi44Nzc3NSwzOC4wNTY4MTgyIDI2Ljc1LDM4LjM3NjgxODIgMjYuNzUsMzguNzI3MjcyNyBDMjYuNzUsMzguOTYyNzI3MyAyNi44MDczMTI1LDM5LjE4NDA5MDkgMjYuOTA4Mzc1LDM5LjM3NzI3MjcgQzI3LjEzMDYyNSwzOS44MDIyNzI3IDI3LjU2NDE4NzUsNDAuMDkwOTA5MSAyOC4wNjI1LDQwLjA5MDkwOTEgQzI4LjA3NjkzNzUsNDAuMDkwOTA5MSAyOC4wOTEzNzUsNDAuMDkgMjguMTA1ODEyNSw0MC4wODk1NDU1IEMyOC4xMTQxMjUsNDAuMDg5MDkwOSAyOC4xMjI0Mzc1LDQwLjA4OTA5MDkgMjguMTMwNzUsNDAuMDg4NjM2NCBDMjguMTQwMzc1LDQwLjA4ODE4MTggMjguMTQ5NTYyNSw0MC4wODcyNzI3IDI4LjE1OTE4NzUsNDAuMDg2MzYzNiBDMjguMTczNjI1LDQwLjA4NTQ1NDUgMjguMTg4MDYyNSw0MC4wODM2MzY0IDI4LjIwMjA2MjUsNDAuMDgyNzI3MyBDMjguMjA3MzEyNSw0MC4wODE4MTgyIDI4LjIxMjU2MjUsNDAuMDgwOTA5MSAyOC4yMTc4MTI1LDQwLjA4IEMyOC4yMzcwNjI1LDQwLjA3ODE4MTggMjguMjU1ODc1LDQwLjA3NSAyOC4yNzQ2ODc1LDQwLjA3MTgxODIgQzI4LjI3NTEyNSw0MC4wNzE4MTgyIDI4LjI3Niw0MC4wNzE4MTgyIDI4LjI3NjQzNzUsNDAuMDcxMzYzNiBDMjguNTc2NTYyNSw0MC4wMjA0NTQ1IDI4Ljg0MjU2MjUsMzkuODYzMTgxOCAyOS4wMzc2ODc1LDM5LjYzODE4MTggTDMwLjY4NzUsMzcuNzM1NDU0NSBMMzAuNjg3NSw0NC42MzYzNjM2IEMzMC42ODc1LDQ1LjM4OTU0NTUgMzEuMjc1MDYyNSw0NiAzMiw0NiBDMzIuNzI0OTM3NSw0NiAzMy4zMTI1LDQ1LjM4OTU0NTUgMzMuMzEyNSw0NC42MzYzNjM2IEwzMy4zMTI1LDM3LjczNTQ1NDUgTDM0Ljk2MTg3NSwzOS42MzkwOTA5IEMzNS4xNTcsMzkuODY0MDkwOSAzNS40MjM4NzUsNDAuMDIxMzYzNiAzNS43MjQsNDAuMDcyMjcyNyBMMzUuNzI0ODc1LDQwLjA3MjI3MjcgQzM1Ljc0NDU2MjUsNDAuMDc1NDU0NSAzNS43NjMzNzUsNDAuMDc4MTgxOCAzNS43ODMwNjI1LDQwLjA4MDkwOTEgQzM1Ljc4Nzg3NSw0MC4wODA5MDkxIDM1Ljc5MjY4NzUsNDAuMDgxODE4MiAzNS43OTc1LDQwLjA4MjcyNzMgQzM1LjgxMTkzNzUsNDAuMDgzNjM2NCAzNS44MjY4MTI1LDQwLjA4NTQ1NDUgMzUuODQxMjUsNDAuMDg2MzYzNiBDMzUuODUwNDM3NSw0MC4wODcyNzI3IDM1Ljg2MDA2MjUsNDAuMDg4MTgxOCAzNS44Njg4MTI1LDQwLjA4ODYzNjQgQzM1Ljg3NzU2MjUsNDAuMDg5MDkwOSAzNS44ODYzMTI1LDQwLjA4OTA5MDkgMzUuODk1MDYyNSw0MC4wODk1NDU1IEMzNS45MDk1LDQwLjA5MDQ1NDUgMzUuOTIzMDYyNSw0MC4wOTA5MDkxIDM1LjkzNzUsNDAuMDkwOTA5MSBDMzYuNjYyNDM3NSw0MC4wOTA5MDkxIDM3LjI1LDM5LjQ4MDQ1NDUgMzcuMjUsMzguNzI3MjcyNyBMMzcuMjUsMzguNzI2MzYzNiBDMzcuMjUsMzguNjgzNjM2NCAzNy4yNDc4MTI1LDM4LjY0MTM2MzYgMzcuMjQzODc1LDM4LjU5OTU0NTUgWiBNNDEuMzU2ODEyNSwyNy42NjE4MTgyIEMzOS44OTYsMjMuNzY2MzYzNiAzNi4yNjY5Mzc1LDIxIDMyLDIxIEMyNy43MzM1LDIxIDI0LjEwNCwyMy43NjYzNjM2IDIyLjY0MzE4NzUsMjcuNjYxMzYzNiBDMTkuOTU1NjI1LDI4LjUxNDU0NTUgMTgsMzEuMTEwNDU0NSAxOCwzNC4xODE4MTgyIEMxOCwzNy45NDcyNzI3IDIwLjkzODI1LDQxIDI0LjU2MjUsNDEgQzI1LjI4NzQzNzUsNDEgMjUuODc1LDQwLjM4OTU0NTUgMjUuODc1LDM5LjYzNjM2MzYgQzI1Ljg3NSwzOC44ODMxODE4IDI1LjI4NzQzNzUsMzguMjcyNzI3MyAyNC41NjI1LDM4LjI3MjcyNzMgQzIyLjM4NzY4NzUsMzguMjcyNzI3MyAyMC42MjUsMzYuNDQxMzYzNiAyMC42MjUsMzQuMTgxODE4MiBDMjAuNjI1LDMyLjk2MzYzNjQgMjEuMTQwMzc1LDMxLjg3MjcyNzMgMjEuOTUzNjg3NSwzMS4xMjM2MzY0IEMyMi4wMzc2ODc1LDMxLjA0NjM2MzYgMjIuMTI1MTg3NSwzMC45NzMxODE4IDIyLjIxNDg3NSwzMC45MDMxODE4IEMyMi4yMjA1NjI1LDMwLjg5ODYzNjQgMjIuMjI2Njg3NSwzMC44OTQwOTA5IDIyLjIzMjM3NSwzMC44ODk1NDU1IEMyMi4zMTcyNSwzMC44MjQwOTA5IDIyLjQwNTE4NzUsMzAuNzYzMTgxOCAyMi40OTQ4NzUsMzAuNzA1IEMyMi41MDg4NzUsMzAuNjk1OTA5MSAyMi41MjI4NzUsMzAuNjg3MjcyNyAyMi41MzY4NzUsMzAuNjc4NjM2NCBDMjIuNjIwODc1LDMwLjYyNTkwOTEgMjIuNzA2NjI1LDMwLjU3NjM2MzYgMjIuNzk0MTI1LDMwLjUzMDQ1NDUgQzIyLjgxODE4NzUsMzAuNTE3NzI3MyAyMi44NDI2ODc1LDMwLjUwNTkwOTEgMjIuODY3MTg3NSwzMC40OTQwOTA5IEMyMi45NDc2ODc1LDMwLjQ1MzYzNjQgMjMuMDI5NSwzMC40MTU5MDkxIDIzLjExMjYyNSwzMC4zODEzNjM2IEMyMy4xNDg5Mzc1LDMwLjM2NjM2MzYgMjMuMTg2MTI1LDMwLjM1MzE4MTggMjMuMjIyODc1LDMwLjMzOTU0NTUgQzIzLjI5NzY4NzUsMzAuMzExMzYzNiAyMy4zNzI5Mzc1LDMwLjI4MzYzNjQgMjMuNDQ5OTM3NSwzMC4yNiBDMjMuNTAwNjg3NSwzMC4yNDQ1NDU1IDIzLjU1MzE4NzUsMzAuMjMxODE4MiAyMy42MDQ4MTI1LDMwLjIxODYzNjQgQzIzLjY3MTMxMjUsMzAuMjAxMzYzNiAyMy43MzczNzUsMzAuMTgyNzI3MyAyMy44MDQ3NSwzMC4xNjkwOTA5IEMyMy44NzU2MjUsMzAuMTU0NTQ1NSAyMy45NDgyNSwzMC4xNDUgMjQuMDIwNDM3NSwzMC4xMzUgQzI0LjA3MjUsMzAuMTI3NzI3MyAyNC4xMjM2ODc1LDMwLjExNzI3MjcgMjQuMTc2MTg3NSwzMC4xMTIyNzI3IEMyNC4zMDM1LDMwLjA5ODYzNjQgMjQuNDMyMTI1LDMwLjA5MDkwOTEgMjQuNTYyNSwzMC4wOTA5MDkxIEMyNC42MDM2MjUsMzAuMDkwOTA5MSAyNC42NDM0Mzc1LDMwLjA5NTkwOTEgMjQuNjg0MTI1LDMwLjA5NzI3MjcgQzI0LjcyMzkzNzUsMjkuODY0MDkwOSAyNC43NzQyNSwyOS42MzUgMjQuODMzNzUsMjkuNDEgQzI0Ljg0ODE4NzUsMjkuMzU1IDI0Ljg2Nzg3NSwyOS4zMDIyNzI3IDI0Ljg4MzYyNSwyOS4yNDc3MjczIEMyNC45MzI2MjUsMjkuMDc3MjcyNyAyNC45ODI5Mzc1LDI4LjkwNzI3MjcgMjUuMDQyODc1LDI4Ljc0MjI3MjcgQzI1LjA2MDgxMjUsMjguNjkyMjcyNyAyNS4wODMxMjUsMjguNjQ0NTQ1NSAyNS4xMDE5Mzc1LDI4LjU5NSBDMjUuMTY2Njg3NSwyOC40MjY4MTgyIDI1LjIzMzE4NzUsMjguMjYgMjUuMzA4ODc1LDI4LjA5ODE4MTggQzI1LjMyNzI1LDI4LjA1OTA5MDkgMjUuMzQ4MjUsMjguMDIxODE4MiAyNS4zNjcwNjI1LDI3Ljk4MzE4MTggQzI1LjQ0OTMxMjUsMjcuODE0MDkwOSAyNS41MzUwNjI1LDI3LjY0NjM2MzYgMjUuNjI5MTI1LDI3LjQ4NDU0NTUgQzI2LjkyNzYyNSwyNS4yMzU0NTQ1IDI5LjI5MSwyMy43MjcyNzI3IDMyLDIzLjcyNzI3MjcgQzM0LjcwODU2MjUsMjMuNzI3MjcyNyAzNy4wNzMyNSwyNS4yMzU0NTQ1IDM4LjM3MDg3NSwyNy40ODQ1NDU1IEMzOC40NjQwNjI1LDI3LjY0NjgxODIgMzguNTUwMjUsMjcuODE0MDkwOSAzOC42MzI1LDI3Ljk4MzE4MTggQzM4LjY1MTMxMjUsMjguMDIxODE4MiAzOC42NzIzMTI1LDI4LjA1OTA5MDkgMzguNjkwNjg3NSwyOC4wOTgxODE4IEMzOC43NjYzNzUsMjguMjYgMzguODMyODc1LDI4LjQyNzI3MjcgMzguODk3NjI1LDI4LjU5NSBDMzguOTE2NDM3NSwyOC42NDQ1NDU1IDM4LjkzODc1LDI4LjY5MjI3MjcgMzguOTU2Njg3NSwyOC43NDIyNzI3IEMzOS4wMTcwNjI1LDI4LjkwNzI3MjcgMzkuMDY2OTM3NSwyOS4wNzcyNzI3IDM5LjExNjM3NSwyOS4yNDc3MjczIEMzOS4xMzE2ODc1LDI5LjMwMjI3MjcgMzkuMTUxMzc1LDI5LjM1NSAzOS4xNjU4MTI1LDI5LjQxIEMzOS4yMjU3NSwyOS42MzUgMzkuMjc1NjI1LDI5Ljg2NDA5MDkgMzkuMzE1NDM3NSwzMC4wOTcyNzI3IEMzOS4zNTYxMjUsMzAuMDk1OTA5MSAzOS4zOTYzNzUsMzAuMDkwOTA5MSAzOS40Mzc1LDMwLjA5MDkwOTEgQzM5LjU2Nzg3NSwzMC4wOTA5MDkxIDM5LjY5NjUsMzAuMDk4MTgxOCAzOS44MjMzNzUsMzAuMTExMzYzNiBDMzkuODc1ODc1LDMwLjExNjgxODIgMzkuOTI3MDYyNSwzMC4xMjY4MTgyIDM5Ljk3OTEyNSwzMC4xMzQwOTA5IEM0MC4wNTA4NzUsMzAuMTQ0NTQ1NSA0MC4xMjM1LDMwLjE1MzYzNjQgNDAuMTk0Mzc1LDMwLjE2ODE4MTggQzQwLjI2MjYyNSwzMC4xODE4MTgyIDQwLjMyODY4NzUsMzAuMiA0MC4zOTQzMTI1LDMwLjIxNzcyNzMgQzQwLjQ0NjM3NSwzMC4yMzA5MDkxIDQwLjQ5ODQzNzUsMzAuMjQzNjM2NCA0MC41NDkxODc1LDMwLjI1OTA5MDkgQzQwLjYyNjE4NzUsMzAuMjgyNzI3MyA0MC43MDE4NzUsMzAuMzEwNDU0NSA0MC43NzYyNSwzMC4zMzg2MzY0IEM0MC44MTMsMzAuMzUyNzI3MyA0MC44NTA2MjUsMzAuMzY1NDU0NSA0MC44ODY1LDMwLjM4MDQ1NDUgQzQwLjk3MDA2MjUsMzAuNDE1IDQxLjA1MTQzNzUsMzAuNDUzMTgxOCA0MS4xMzIzNzUsMzAuNDkzMTgxOCBDNDEuMTU2ODc1LDMwLjUwNSA0MS4xODEzNzUsMzAuNTE3MjcyNyA0MS4yMDU0Mzc1LDMwLjUyOTU0NTUgQzQxLjI5MzM3NSwzMC41NzU0NTQ1IDQxLjM3ODY4NzUsMzAuNjI1IDQxLjQ2MjY4NzUsMzAuNjc3NzI3MyBDNDEuNDc2Njg3NSwzMC42ODYzNjM2IDQxLjQ5MDY4NzUsMzAuNjk1NDU0NSA0MS41MDQ2ODc1LDMwLjcwNDA5MDkgQzQxLjU5NTI1LDMwLjc2MjI3MjcgNDEuNjgyMzEyNSwzMC44MjM2MzY0IDQxLjc2ODA2MjUsMzAuODg4NjM2NCBDNDEuNzczNzUsMzAuODkzMTgxOCA0MS43Nzk4NzUsMzAuODk3NzI3MyA0MS43ODU1NjI1LDMwLjkwMjI3MjcgQzQxLjg3NTY4NzUsMzAuOTcyMjcyNyA0MS45NjI3NSwzMS4wNDU0NTQ1IDQyLjA0Njc1LDMxLjEyMjcyNzMgQzQyLjg1OTYyNSwzMS44NzMxODE4IDQzLjM3NSwzMi45NjM2MzY0IDQzLjM3NSwzNC4xODE4MTgyIEM0My4zNzUsMzYuNDQxMzYzNiA0MS42MTIzMTI1LDM4LjI3MjcyNzMgMzkuNDM3NSwzOC4yNzI3MjczIEMzOC43MTI1NjI1LDM4LjI3MjcyNzMgMzguMTI1LDM4Ljg4MzE4MTggMzguMTI1LDM5LjYzNjM2MzYgQzM4LjEyNSw0MC4zODk1NDU1IDM4LjcxMjU2MjUsNDEgMzkuNDM3NSw0MSBDNDMuMDYxNzUsNDEgNDYsMzcuOTQ3MjcyNyA0NiwzNC4xODE4MTgyIEM0NiwzMS4xMTA0NTQ1IDQ0LjA0MzkzNzUsMjguNTE0NTQ1NSA0MS4zNTY4MTI1LDI3LjY2MTgxODIgWiIgZmlsbC1vcGFjaXR5PSIwLjc1IiBmaWxsPSIjNTk1OTU5Ij48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjUuMzA0MzQ3OCw0MS42OTU2NTIyIEw2NS4zMDQzNDc4LDM3LjMwNDM0NzggQzY1LjMwNDM0NzgsMzYuNTgzOTEzIDY0LjcyMDQzNDgsMzYgNjQsMzYgQzYzLjI3OTU2NTIsMzYgNjIuNjk1NjUyMiwzNi41ODM5MTMgNjIuNjk1NjUyMiwzNy4zMDQzNDc4IEw2Mi42OTU2NTIyLDQxLjY5NTY1MjIgTDU4LjMwNDM0NzgsNDEuNjk1NjUyMiBDNTcuNTgzOTEzLDQxLjY5NTY1MjIgNTcsNDIuMjc5NTY1MiA1Nyw0MyBDNTcsNDMuNzIwNDM0OCA1Ny41ODM5MTMsNDQuMzA0MzQ3OCA1OC4zMDQzNDc4LDQ0LjMwNDM0NzggTDYyLjY5NTY1MjIsNDQuMzA0MzQ3OCBMNjIuNjk1NjUyMiw0OC42OTU2NTIyIEM2Mi42OTU2NTIyLDQ5LjQxNjA4NyA2My4yNzk1NjUyLDUwIDY0LDUwIEM2NC43MjA0MzQ4LDUwIDY1LjMwNDM0NzgsNDkuNDE2MDg3IDY1LjMwNDM0NzgsNDguNjk1NjUyMiBMNjUuMzA0MzQ3OCw0NC4zMDQzNDc4IEw2OS42OTU2NTIyLDQ0LjMwNDM0NzggQzcwLjQxNjA4Nyw0NC4zMDQzNDc4IDcxLDQzLjcyMDQzNDggNzEsNDMgQzcxLDQyLjI3OTU2NTIgNzAuNDE2MDg3LDQxLjY5NTY1MjIgNjkuNjk1NjUyMiw0MS42OTU2NTIyIEw2NS4zMDQzNDc4LDQxLjY5NTY1MjIgWiIgZmlsbD0iIzAwRDk3RSI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4='
					onRendered={this.dropzoneRendered} />
			)
		}

		if (this.state.folders && this.state.folders.length) {
			hasFoldersClassName = ' has-folders';

			for (var i in this.state.folders) {
				var folder = this.state.folders[i];
				folders[folder.path] = <Folder onRemove={this.removeFolder} onRefresh={this.refreshFolder} onShow={this.showFolder} name={folder.name} path={folder.path} status={folder.status} items={folder.items} />;
			}
		}
		else if (this.gotInitialState('folder')) {
			noSharedFoldersNotice = (
				<NoSharedFoldersNotice
					title={this.i18n('settings_sharedFolders_noSharedFoldersNotice_title')}
					description={this.i18n('settings_sharedFolders_noSharedFoldersNotice_description')} />
			);
		}

		return (
			<section className={'shared-folders-handler' + hasFoldersClassName + this.gotStateClassNames()}>
				<header>
					<h1>{this.i18n('settings_sharedFolders_title')}</h1>
					<div className='add-folder-button'>
						<a href='#' ref='addFolderButton' onClick={this.handleAddFolderButtonClick}>
							<SvgIcon icon='plus' /> {this.i18n('settings_sharedFolders_addFolderButton_label')}
						</a>
					</div>
				</header>
				
				{folders}
				{noSharedFoldersNotice}
				{dropzone}
			</section>
		)
	}
});

module.exports = SharedFoldersHandler;