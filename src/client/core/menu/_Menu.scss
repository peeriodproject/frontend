.menu {
	$squish: 1;
	$item-width: 4;

	@include transition(max-height 0.25s ease);

	position: fixed;
	top: rhythm($search-form-padding * 2 + $search-form-height);
	left: 0;
	width: 100%;
	overflow: hidden;

	z-index: 50;

	background: $menu-background-color;
	color: $menu-color;

	max-height: 0;

	&.is-open {
		max-height: rhythm(15);
	}

	&:not(.is-open) nav > ul {
		margin-top: -10%;
		padding-bottom: 10%;
		opacity: 0;
	}

	nav {
		$duration: 0.15s;

		@include clearfix;
		@include pad($squish);
		@include padding-leader(2);
		@include padding-trailer(2);

		&> ul {
			@include clearfix;
			//@include container(12 center inside);

			@include transition(padding $duration ease, margin $duration ease, opacity $duration ease);
		
			opacity: 1;

			li {
				@include gallery($item-width of 12);

				@include nested($item-width) {
					
					h1,h2,h3 {
						@include prefix(1);

						color: $menu-heading-color;
					}

					&> span.icon {
						@include span(1);
					}

					&> div {
						@include span(3 last);

						&> a {
							@include icon-button($menu-heading-color, $green-color);
						}
					}
				}
			}
		}
	}

	.menu-buttons {
		@include clearfix;
		@include pad(0.5);
		@include leading-border(1px);
		@include padding-trailer(1);

		border-color: $menu-divider-color;
		text-align: right;

		a {
			@include icon-button($menu-buttons-color, $menu-buttons-color-hover);
		}
	}
}